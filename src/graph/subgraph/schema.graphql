type ERC20 @entity(immutable: true) {
  id: ID!
}
type Token @entity {
  id: ID!
  createdAt: BigInt!
  amount: BigInt!
  expiry: BigInt!
  ercToken: ERC20!
  status: BigInt!
  transactionHash: String!
  owner: Account!
  drawer: Account!
  recipient: Account!
  auditor: Account!
}
type Account @entity {
  id: ID!

  tokensOwned: [Token!]! @derivedFrom(field: "owner")
  numTokensOwned: BigInt!
  tokensSent: [Token!]! @derivedFrom(field: "drawer")
  numTokensSent: BigInt!
  tokensAuditing: [Token!]! @derivedFrom(field: "auditor")
  numTokensAuditing: BigInt!
  tokensReceived: [Token!]! @derivedFrom(field: "recipient")
  numTokensReceived: BigInt!

  tokensCashed: [Token!]!
  numTokensCashed: BigInt!
  tokensVoided: [Token!]!
  numTokensVoided: BigInt!

  voidedTokens: [Token!]!
  numVoidedTokens: BigInt!

  auditorsRequested: [RequestAuditor!]! @derivedFrom(field: "userAddress")
  numAuditorsRequested: BigInt!
  usersRequested: [RequestUser!]! @derivedFrom(field: "auditorAddress")
  numUsersRequested: BigInt!
}

type RequestAuditor @entity {
  id: ID!
  userAddress: Account!
  auditorAddress: Account!
  isWaiting: Boolean!
  createdAt: BigInt!
}
type RequestUser @entity {
  id: ID!
  auditorAddress: Account!
  userAddress: Account!
  isWaiting: Boolean!
  createdAt: BigInt!
}
type Handshake @entity {
  id: ID!
  auditorShake: RequestAuditor!
  userShake: RequestUser!
  completed: Boolean!
  completedAt: BigInt!
}
